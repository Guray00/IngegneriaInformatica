**Esercizio 1 [4 punti]**

Descrivere il comportamento della funzione **dup2** mostrandone la sintassi

**Esercizio 2** [8 punti]

Cosa permette di fare il comando chmod?
Descrivere la rappresentazione con rappresentazione **simbolica**
Spiegare cosa si visualizza per quanto riguarda i permessi del file *fileName* al termine dei comandi

```
chmod ugo=rwx fileName
chmod g-x fileName
ls -l fileName
```

**Esercizio 3** [6 punti]
Spiegare il seguente codice

```
int main() {
    int count = 0;
    int i = 0;
    
    while (i < 2) {
        int pid = fork();
        if (pid > 0) {
            wait(NULL);
        }
        else {
            count++;
        }
        i++;
    }
    fprintf(stdout, "count = %d", count);
} 
```

**Esercizio 4** [12 punti]
Si consideri un'applicazione in cui più thread possono effettuare depositi e prelievi di una risorsa(resource) invocando le funzioni deposit e withdraw. Completare le due funzioni in modo che
i) venga garantito l'accesso in mutua esclusione alla risorsa condivisa;
ii) il prelievo venga effettuato solo quando la quantità di risorsa richiesta è disponibile (in caso contrario il thread si sospende finchè la risorsa non aumenta);
iii) il deposito venga effettuato solo se la quantità di risorsa risultante non superi una soglia (in caso contrario il thread si sospende finchè la risorsa non diminuisce). Il candidato supponga che il main del codice contenga la corretta inizializzazione dei semafori.

```
int resource = 0;
int soglia = 100;;
pthread_mutex_t M;
pthread_cond_t LOW_BALANCE;
pthread_cond_t HIGH_BALANCE;

// effettua un deposito (aggiunge amount a resource).
void deposit(int amount) {



}

// effettua un prelievo (sottrae amount da resource);
void withdraw(int amount) {



}
```
